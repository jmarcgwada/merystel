
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Zenith POS system.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user." },
        "firstName": { "type": "string", "description": "The first name of the user." },
        "lastName": { "type": "string", "description": "The last name of the user." },
        "email": { "type": "string", "description": "The email address of the user.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the user." },
        "role": { "type": "string", "description": "The role of the user within the system.", "enum": ["admin", "manager", "cashier"]},
        "companyId": { "type": "string", "description": "Reference to the Company the user belongs to." },
        "isDisabled": { "type": "boolean", "description": "Whether the user account is disabled." },
        "sessionDuration": { "type": "number", "description": "Session duration in minutes. 0 for unlimited." },
        "accessMode": { "type": "string", "description": "Determines which part of the application the user can access.", "enum": ["caisse", "commercial", "both"]},
        "defaultSalesMode": { "type": "string", "description": "The default sales mode for a cashier.", "enum": ["pos", "supermarket", "restaurant"]},
        "isForcedMode": { "type": "boolean", "description": "If true, the user is locked into their default sales mode." }
      },
      "required": ["id", "firstName", "lastName", "email", "role", "companyId"]
    },
    "Company": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Company",
      "type": "object",
      "description": "Represents a company using the Zenith POS system. This is the root for all company-specific data.",
      "properties": {
        "name": { "type": "string", "description": "The name of the company." },
        "address": { "type": "string", "description": "The physical address of the company." },
        "postalCode": { "type": "string" },
        "city": { "type": "string" },
        "region": { "type": "string" },
        "country": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "website": { "type": "string" },
        "siret": { "type": "string" },
        "legalForm": { "type": "string" },
        "iban": { "type": "string" },
        "bic": { "type": "string" },
        "notes": { "type": "string" },
        "ticketCounter": { "type": "number", "description": "Counter for ticket numbers." },
        "invoiceCounter": { "type": "number", "description": "Counter for invoice numbers." },
        "quoteCounter": { "type": "number", "description": "Counter for quote numbers." },
        "deliveryNoteCounter": { "type": "number", "description": "Counter for delivery note numbers." }
      },
      "required": ["name", "address", "postalCode", "city", "country", "email"]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer of the company.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the customer." },
        "name": { "type": "string", "description": "The full name of the customer." },
        "email": { "type": "string", "description": "The email address of the customer.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the customer." },
        "phone2": { "type": "string", "description": "The second phone number of the customer." },
        "isDefault": { "type": "boolean", "description": "Whether this is the default customer for new sales." },
        "address": { "type": "string" },
        "postalCode": { "type": "string" },
        "city": { "type": "string" },
        "country": { "type": "string" },
        "iban": { "type": "string" },
        "notes": { "type": "string" }
      },
      "required": ["id", "name"]
    },
    "Supplier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier for the company.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the supplier." },
        "name": { "type": "string", "description": "The name of the supplier." },
        "contactName": { "type": "string", "description": "The name of the contact person." },
        "email": { "type": "string", "description": "The email address of the supplier.", "format": "email" },
        "phone": { "type": "string", "description": "The phone number of the supplier." },
        "address": { "type": "string" },
        "postalCode": { "type": "string" },
        "city": { "type": "string" },
        "country": { "type": "string" },
        "siret": { "type": "string" },
        "notes": { "type": "string" },
        "website": { "type": "string" },
        "iban": { "type": "string" },
        "bic": { "type": "string" }
      },
      "required": ["id", "name"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents an item category.",
      "properties": {
        "name": { "type": "string" },
        "color": { "type": "string" },
        "image": { "type": "string" },
        "isFavorite": { "type": "boolean" },
        "isRestaurantOnly": { "type": "boolean" }
      },
      "required": ["name"]
    },
    "Item": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Item",
      "type": "object",
      "description": "Represents a product or service that can be sold.",
      "properties": {
        "name": { "type": "string" },
        "price": { "type": "number" },
        "purchasePrice": { "type": "number", "description": "The cost of acquiring the item." },
        "categoryId": { "type": "string" },
        "vatId": { "type": "string" },
        "image": { "type": "string" },
        "isFavorite": { "type": "boolean" },
        "description": { "type": "string" },
        "description2": { "type": "string" },
        "showImage": { "type": "boolean" },
        "barcode": { "type": "string" },
        "marginPercentage": { "type": "number", "description": "The profit margin as a percentage of the purchase price." },
        "requiresSerialNumber": { "type": "boolean" },
        "additionalCosts": { "type": "number", "description": "Additional costs as a percentage of the purchase price." },
        "manageStock": { "type": "boolean" },
        "stock": { "type": "number" },
        "lowStockThreshold": { "type": "number" }
      },
      "required": ["name", "price", "categoryId", "vatId", "barcode"]
    },
    "Table": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Table",
      "type": "object",
      "description": "Represents a table in a restaurant setting.",
      "properties": {
        "name": { "type": "string" },
        "number": { "type": "number" },
        "description": { "type": "string" },
        "status": { "type": "string", "enum": ["available", "occupied", "paying"] },
        "order": { "type": "array", "items": { "type": "object" } },
        "covers": { "type": "number", "description": "Number of seats at the table." },
        "lockedBy": { "type": "string", "description": "ID of the user who locked the table." },
        "occupiedByUserId": { "type": "string" },
        "occupiedAt": { "type": "string", "format": "date-time" },
        "closedByUserId": { "type": "string" },
        "closedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["name", "number", "status", "order"]
    },
    "Sale": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sale",
      "type": "object",
      "description": "Represents a completed sale transaction, which can be a ticket or an invoice.",
      "properties": {
        "ticketNumber": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "items": { "type": "array", "items": { "type": "object" } },
        "subtotal": { "type": "number" },
        "tax": { "type": "number" },
        "total": { "type": "number" },
        "payments": { "type": "array", "items": { "type": "object" } },
        "customerId": { "type": "string" },
        "tableId": { "type": "string" },
        "tableName": { "type": "string" },
        "status": { "type": "string", "enum": ["paid", "pending", "quote", "delivery_note"] }
      },
      "required": ["ticketNumber", "date", "items", "subtotal", "tax", "total", "status"]
    },
    "PaymentMethod": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PaymentMethod",
      "type": "object",
      "description": "Defines a method of payment.",
      "properties": {
        "name": { "type": "string" },
        "icon": { "type": "string", "enum": ["card", "cash", "check", "other"] },
        "type": { "type": "string", "enum": ["direct", "indirect"] },
        "value": { "type": "number" }
      },
      "required": ["name", "type"]
    },
    "VatRate": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VatRate",
      "type": "object",
      "description": "Defines a Value Added Tax rate.",
      "properties": {
        "name": { "type": "string" },
        "rate": { "type": "number" },
        "code": { "type": "number" }
      },
      "required": ["name", "rate", "code"]
    },
    "HeldOrder": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HeldOrder",
      "type": "object",
      "description": "Represents a temporarily saved order.",
      "properties": {
        "date": { "type": "string", "format": "date-time" },
        "items": { "type": "array", "items": { "type": "object" } },
        "total": { "type": "number" },
        "tableName": { "type": "string" },
        "tableId": { "type": "string" }
      },
      "required": ["date", "items", "total"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile information."
    },
    "/companies/{companyId}": {
      "schema": { "$ref": "#/entities/Company" },
      "description": "Stores root information for a company."
    },
    "/companies/{companyId}/customers/{customerId}": {
      "schema": { "$ref": "#/entities/Customer" },
      "description": "Stores customer data for a specific company."
    },
    "/companies/{companyId}/suppliers/{supplierId}": {
      "schema": { "$ref": "#/entities/Supplier" },
      "description": "Stores supplier data for a specific company."
    },
    "/companies/{companyId}/categories/{categoryId}": {
      "schema": { "$ref": "#/entities/Category" },
      "description": "Item categories for a company."
    },
    "/companies/{companyId}/items/{itemId}": {
      "schema": { "$ref": "#/entities/Item" },
      "description": "All sellable items for a company."
    },
    "/companies/{companyId}/tables/{tableId}": {
      "schema": { "$ref": "#/entities/Table" },
      "description": "Restaurant tables for a company."
    },
    "/companies/{companyId}/sales/{saleId}": {
      "schema": { "$ref": "#/entities/Sale" },
      "description": "Record of all completed sales, invoices, quotes, and delivery notes."
    },
    "/companies/{companyId}/paymentMethods/{methodId}": {
      "schema": { "$ref": "#/entities/PaymentMethod" },
      "description": "Payment methods configured for a company."
    },
    "/companies/{companyId}/vatRates/{vatId}": {
      "schema": { "$ref": "#/entities/VatRate" },
      "description": "VAT rates configured for a company."
    },
    "/companies/{companyId}/heldOrders/{orderId}": {
      "schema": { "$ref": "#/entities/HeldOrder" },
      "description": "Temporarily held orders for a company."
    }
  }
}
